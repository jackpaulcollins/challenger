{"ast":null,"code":"var _jsxFileName = \"/Users/jackcollins/Desktop/moi_challenger/client/src/components/App.js\";\nimport React, { Component } from 'react';\nimport { Routes, Route } from \"react-router-dom\";\nimport NavigationBar from './NavigationBar';\nimport Login from './auth/Login';\nimport axios from \"axios\";\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport Registration from './auth/Registration';\nimport Dashboard from './Dashboard';\nimport CreateReport from './CreateReport';\nimport Report from './Report';\nimport ReportEdit from './ReportEdit';\nimport { API_ROOT } from '../apiRoot';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default class App extends Component {\n  constructor() {\n    super();\n    this.state = {\n      isLoggedIn: false,\n      user: {}\n    };\n    this.handleLogin = this.handleLogin.bind(this);\n    this.handleLogout = this.handleLogout.bind(this);\n  }\n\n  checkLoginStatus() {\n    console.log(API_ROOT);\n    axios.get(`${API_ROOT}/api/logged_in`, {\n      withCredentials: true\n    }).then(response => {\n      if (response.data.logged_in && this.state.isLoggedIn === false) {\n        this.setState({\n          isLoggedIn: true,\n          user: response.data.user\n        });\n      } else if (!response.data.logged_in & this.state.isLoggedIn === true) {\n        this.setState({\n          isLoggedIn: false,\n          user: {}\n        });\n      }\n    }).catch(error => {\n      console.log(\"check login error\", error);\n    });\n  }\n\n  handleSuccessfulAuth(data) {\n    this.handleLogin(data);\n  }\n\n  componentDidMount() {\n    this.checkLoginStatus();\n  }\n\n  handleLogin(data) {\n    this.setState({\n      isLoggedIn: true,\n      user: data.data.user\n    });\n  }\n\n  handleLogout() {\n    axios.delete(`${API_ROOT}/api/logout`, {\n      withCredentials: true\n    }).then(this.setState({\n      isLoggedIn: false,\n      user: {}\n    }));\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(NavigationBar, {\n        isLoggedIn: this.state.isLoggedIn,\n        handleLogout: this.handleLogout\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Routes, {\n        children: [/*#__PURE__*/_jsxDEV(Route, {\n          path: \"/login\",\n          element: /*#__PURE__*/_jsxDEV(Login, {\n            handleLogin: this.handleLogin,\n            handleSuccessfulAuth: this.handleSuccessfulAuth\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 88,\n            columnNumber: 43\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Route, {\n          path: \"/register\",\n          element: /*#__PURE__*/_jsxDEV(Registration, {\n            handleLogin: this.handleLogin,\n            handleSuccessfulAuth: this.handleSuccessfulAuth\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 92,\n            columnNumber: 46\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Route, {\n          path: \"/\",\n          element: /*#__PURE__*/_jsxDEV(Dashboard, {\n            isLoggedIn: this.state.isLoggedIn,\n            currentUser: this.state.user\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 97,\n            columnNumber: 38\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Route, {\n          path: \"/create-report\",\n          element: /*#__PURE__*/_jsxDEV(CreateReport, {\n            currentUser: this.state.user\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 99,\n            columnNumber: 51\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Route, {\n          path: `/report/:id`,\n          element: /*#__PURE__*/_jsxDEV(Report, {\n            currentUser: this.state.user\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 100,\n            columnNumber: 48\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Route, {\n          path: `/report/:id/edit`,\n          element: /*#__PURE__*/_jsxDEV(ReportEdit, {\n            currentUser: this.state.user\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 101,\n            columnNumber: 53\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 10\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 7\n    }, this);\n  }\n\n}","map":{"version":3,"sources":["/Users/jackcollins/Desktop/moi_challenger/client/src/components/App.js"],"names":["React","Component","Routes","Route","NavigationBar","Login","axios","Registration","Dashboard","CreateReport","Report","ReportEdit","API_ROOT","App","constructor","state","isLoggedIn","user","handleLogin","bind","handleLogout","checkLoginStatus","console","log","get","withCredentials","then","response","data","logged_in","setState","catch","error","handleSuccessfulAuth","componentDidMount","delete","render"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { Routes, Route } from \"react-router-dom\";\nimport NavigationBar from './NavigationBar'\nimport Login from './auth/Login'\nimport axios from \"axios\";\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport Registration from './auth/Registration';\nimport Dashboard from './Dashboard';\nimport CreateReport from './CreateReport';\nimport Report from './Report'\nimport ReportEdit from './ReportEdit'\nimport { API_ROOT } from '../apiRoot'\n\n\nexport default class App extends Component {\n  constructor() {\n    super();\n\n    this.state = {\n      isLoggedIn: false,\n      user: {}\n    }\n\n    this.handleLogin = this.handleLogin.bind(this)\n    this.handleLogout = this.handleLogout.bind(this)\n  }\n\n  checkLoginStatus() {\n    console.log(API_ROOT)\n    axios\n      .get(`${API_ROOT}/api/logged_in`, { withCredentials: true })\n      .then(response => {\n        if (\n          response.data.logged_in &&\n          this.state.isLoggedIn === false\n        ) {\n          this.setState({\n            isLoggedIn: true,\n            user: response.data.user\n          });\n        } else if (\n          !response.data.logged_in &\n          (this.state.isLoggedIn === true)\n        ) {\n          this.setState({\n            isLoggedIn: false,\n            user: {}\n          });\n        }\n      })\n      .catch(error => {\n        console.log(\"check login error\", error);\n      });\n  }\n\n  handleSuccessfulAuth(data) {\n    this.handleLogin(data);\n  }\n\n  componentDidMount() {\n    this.checkLoginStatus();\n  }\n\n  handleLogin(data) {\n    this.setState({\n      isLoggedIn: true,\n      user: data.data.user\n    })\n\n  }\n\n  handleLogout() {\n    axios.delete(`${API_ROOT}/api/logout`, {withCredentials: true}).then(\n      this.setState({\n        isLoggedIn: false,\n        user: {}\n      })\n    )\n  }\n\n  render() {\n    return(\n      <div>\n        <NavigationBar isLoggedIn={this.state.isLoggedIn} \n                                  handleLogout={this.handleLogout} \n        />\n         <Routes>\n          <Route path={\"/login\"} element={<Login handleLogin={this.handleLogin}\n                                          handleSuccessfulAuth={this.handleSuccessfulAuth}\n                                          />} \n          />\n          <Route path={\"/register\"} element={<Registration \n                                            handleLogin={this.handleLogin}\n                                            handleSuccessfulAuth={this.handleSuccessfulAuth}\n                                            />} \n          />\n          <Route path={\"/\"} element={<Dashboard isLoggedIn={this.state.isLoggedIn} \n                                                currentUser={this.state.user} />} />\n          <Route path={\"/create-report\"} element={<CreateReport currentUser={this.state.user} />} />\n          <Route path={`/report/:id`} element={<Report currentUser={this.state.user} />} />\n          <Route path={`/report/:id/edit`} element={<ReportEdit currentUser={this.state.user} />} />\n         </Routes>\n      </div>\n    );\n  }\n}"]},"metadata":{},"sourceType":"module"}